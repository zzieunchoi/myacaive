# model

* 단일한 데이터에 대한 정보를 가짐
* 저장된 데이터 베이스의 구조(layout)
* django는 model을 통해 데이터에 접속하고 관리



## database(DB)

* 체계화된 데이터의 모임
* 쿼리
  * 데이터를 조회하기 위한 명령어
  * 조건에 맞는 데이터를 추출하거나 조작하는 명령어
  * QUERY를 날린다 = DB 조작한다



* 기본 구조
  * 스키마(schema)
    * 데이터 베이스에서 자료의 구조, 표현방법, 관계등을 정의한 구조
    * create, read, update, delete = CRUD
  * 테이블(table)
    * table을 class로 정의함
    * 열: 필드 or 속성 - 고유한 데이터 형식 지정
    * 행: 레코드 or 튜플 - 테이블의 데이터는 행에 저장
    * PK(기본키): 각 행의 고유값 - 반드시 설정해야함



 # ORM

object - relational - mapping

* class 만들고 class 끼리 연결시켜주는 것
* 객체 지향 프로그래밍 언어를 사용하여 호환되지 않는 유형의 시스템(장고 -sql) 간에 데이터를 변환하는 프로그래밍 기술

* 장단점
  * 장점
    * sql을 잘 알지 못해도 db 조작 가능
    * sql의 절차적 접근이 아닌 객체 지향적 접근으로 인한 높은 생산성
  * 단점
    * orm만으로 완전한 서비스를 구현하기 어려운 경우가 많음
    * 너무 작아 ㅜㅜ



# 모델 작성하기

models.py에서

```python
class Article(models.Model):
    pass
```

articles어플 안에 article이라고 하는 객체를 만들어줘!



Fields는 데이터 형식을 지정하는 방법

models.메소드()를 가져오는 것

```python
models.CharField() : 글자 속성 지정
models.TextField() 
```

* 사용 모델 필드
  * CharField(max_length = None, ** options)
    * 길이의 제한이 있는 문자열 사용
  * TextField(** options)
    * 글자수가 많을 때 사용
  * auto_now_add
    * 최초 생성 일자
    * 현재 날짜와 시간으로 계속 갱신
  * auto_now
    * 최종 수정 일자





## migrations

순서

```
1. models.py에 새로운 내용 update, create
2. python manage.py makemigrations : migrations 파일 생성
3. python manage.py migrate        : DB 반영 - 모델과 DB의 동기화
4. python manage.py sqlmigrate articles 0001
5. python manage.py showmigrations
```



migrations: 장고가 model에 생긴 변화를 반영하는 방법 - create

```bash
$ python manage.py makemigrations
```

migrate: Operations to perform, running migrations ok~ - db에 반영해준다!

```bash
$ python manage.py migrate
```



```bash
$ python manage.py sqlmigrate articles 0001
```

```bash
-- Create model Article
--

CREATE TABLE "articles_article" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "title" varchar(10) NOT NULL, "content" text NOT NULL);
COMMIT;
```



```bash
$ python manage.py showmigrations
```

```bash
admin
 [X] 0001_initial
 [X] 0002_logentry_remove_auto_add
 [X] 0003_logentry_add_action_flag_choices
articles
 [X] 0001_initial
auth
 [X] 0001_initial
 [X] 0002_alter_permission_name_max_length
 [X] 0003_alter_user_email_max_length
 [X] 0004_alter_user_username_opts
 [X] 0005_alter_user_last_login_null
 [X] 0006_require_contenttypes_0002
 [X] 0007_alter_validators_add_error_messages
 [X] 0008_alter_user_username_max_length
 [X] 0009_alter_user_last_name_max_length
 [X] 0010_alter_group_name_max_length
 [X] 0011_update_proxy_permissions
 [X] 0012_alter_user_first_name_max_length
contenttypes
 [X] 0001_initial
 [X] 0002_remove_content_type_name
sessions
 [X] 0001_initial
```



2번째 TURN

models.py

```python
class Article(models.Model):
    title = models.CharField(max_length = 10)
    content = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
```

를 한 후 

```bash
You are trying to add the field 'created_at' with 'auto_now_add=True' to article without a default; the database needs something to populate existing rows.

 1) Provide a one-off default now (will be set on all existing rows)   
 2) Quit, and let me add a default in models.py
Select an option:
```

created_at 했는데 auto_now_add = True 했더라? 현재 있는 곳에 세팅 해줄까? 0001 다음에 0002로 올려??

그럼 1번

그러면 0002.auto__.py에 새로운 업데이트 추가
